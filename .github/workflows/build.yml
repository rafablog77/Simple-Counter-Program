name: build-executable

on: [push,workflow_dispatch]

jobs:
 build-linux:
  runs-on: ubuntu-latest
  steps:
   - uses: actions/checkout@v4
   - name: Set up Python 3.10
     uses: actions/setup-python@v5
     with:
      python-version: 3.10
   - name: Dowload Pyinstaller
     run: | 
      python -m pip install --upgrade pip
      pip install pyinstaller
   - name: Build executable
     run: |
      cd $GITHUB_WORKSPACE/BUILDS/
      pyinstaller --onefile --noconsole -n Simple-Counter-Program $GITHUB_WORKSPACE/main.py
   - name: Push changes
     run: |
          git config --global user.name '$Env:GITHUB_ACTOR'
          git config --global user.email '$Env:GITHUB_ACTOR@users.noreply.github.com'
          git add -A
          git commit -am "Pushed Linux executable"
          git push
